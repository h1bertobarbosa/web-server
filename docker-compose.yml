version: '2'

services:
  php56:
    build: PHP56fpm
    hostname: "php"
    working_dir: /var/www
    container_name: PHP56fpm
    volumes:
      - $PWD/config/php.ini:/usr/local/etc/php/php.ini
      - $PWD/apps:/var/www
    networks:
      intranet:
        ipv4_address: 200.4.75.2

  nginx:
    build: Nginx
    hostname: web-nginx
    container_name: Nginx
    environment:
      - EMAIL=humberto.obarbosa@gmail.com
      - SUBDOMAINS=h1bertobarbosa.com.br,blog.h1bertobarbosa.com.br
    ports:
      - "80:80"
      - "443:443"
    extra_hosts:
      - "php56:200.4.75.2"
    volumes:
      - $PWD/hosts:/etc/nginx/conf.d:ro
      - $PWD/config/nginx.conf:/etc/nginx/nginx.conf:ro
      - $PWD/config/fastcgi.conf:/etc/nginx/fastcgi.conf:ro
      - $PWD/apps:/var/www
    networks:
      intranet:
        ipv4_address: 200.4.75.3

networks:
  intranet:
    driver: bridge
    ipam:
      driver: default
      config:
      - subnet: 200.4.75.0/24
